/*! string-case-match v1.0.2  | (c) 2015 Antelle | https://github.com/antelle/string-case-match/blob/master/MIT-LICENSE.txt */

!function(){"use strict";function a(a,d){if(!d||!a)return null;var f,i,j,k,l,m,n=a.length,o=c(a),w=[];for(f=0;n>f;f++)w.push(e(a[f]));var x=d.length,y=c(d),z=[];for(f=0;x>f;f++)z.push(e(d[f]));var A=[];for(j=0;n>j;j++)if(o[j]===y[0]){l=w[j];var B;B=0===j?r:l===p||l===q?u:b(w[j],w[j-1])?s:t,m=d[0]===a[j],A.push({pos:j,type:B,strict:m})}if(0===A.length)return null;for(i=1;x>i;i++){k=z[i];var C=[];a:for(f=0;f<A.length;f++){var D=A[f];for(j=D.pos+1;n>j;j++){l=w[j],m=a[j]===d[i];var E=m||o[j]===y[i];if(j===D.pos+1){if(D.waitNewWord)continue;if(E){C.push({prev:D,pos:j,type:v,strict:m});continue}for(var F=D;F.prev;)F=F.prev;if(F.type===t)continue a}if(l!==p&&l!==q){var G=b(w[j],w[j-1]);E&&G&&C.push({prev:D,pos:j,type:s,strict:m})}else k===p?C.push({prev:D,pos:j,type:u,strict:m}):k===q&&E&&C.push({prev:D,pos:j,type:u,strict:m})}k===p&&(D.waitNewWord=!0,C.push(D))}A=C}if(0===A.length)return null;for(f=0;f<A.length;f++)A[f]=g(A[f]),h(A[f],a,d);return A.sort(function(a,b){return b.rank-a.rank}),A[0]}function b(a,b){return a[0]===l&&(b[0]!==l||a===n&&b===m)||a===o&&b!==o}function c(a){return a.toLowerCase().replace(k,d)}function d(a){return x[a]}function e(a){if(a.charCodeAt(0)>4095)return f(a);var b=e[a];return void 0===b&&(e[a]=b=f(a)),b}function f(a){var b=a.toUpperCase();return b!==a.toLowerCase()||"ß"===a?a===b?n:m:a>="0"&&"9">=a?o:" "===a||"	"===a?p:q}function g(a){for(var b={ch:[]};a;)b.ch.unshift({pos:a.pos,type:a.type,strict:a.strict}),a=a.prev;return b}function h(a,b,c){if(a.rank=0,0!==a.ch.length){for(var d=0,e=0;e<a.ch.length;e++)a.ch[e].strict||d++;if(1!==a.ch.length||a.ch[0].type===r||a.ch[0].type===s){var f=1;f-=.1*(d/a.ch.length),a.ch[0].type===t&&(f-=.5);var g=Math.min(a.ch.length,c.length,b.length);f*=g/b.length,a.rank=f}}}function i(a,b,c){for(var d="",e=0,f=!1,g=0;g<a.length;g++){var h=b.ch[e];h&&h.pos===g?(f||(d+=c.start,f=!0),d+=a[g],e++):(f&&(d+=c.end,f=!1),d+=a[g])}return f&&(d+=c.end),d}function j(){var a="[";for(var b in w)if(w.hasOwnProperty(b)){for(var c=w[b],d=0;d<c.length;d++)x[c[d]]=b;a+=c}a+="]",k=new RegExp(a,"g")}var k,l="l",m="ll",n="lu",o="d",p="s",q="x",r="f",s="w",t="l",u="s",v="q",w={a:"àáâãäåÀÁÂÃÄÅ",c:"çÇ",e:"èéêëÈÉÊË",i:"ìíîïÌÍÎÏ",n:"ñÑ",o:"òóôõöÒÓÔÕÖ",u:"ùúûűüÙÚÛŰÜ",y:"ýÿÝŸ","е":"ёЁ",s:"ß"},x={},y=function(a,b){this.strings=a||[],b&&(this.config=b)};y.prototype.config={start:"",end:""},y.prototype.matches=function(b,c){if(!b)return[];var d,e=[],f=this.strings,g=f.length;for(d=0;g>d;d++){var h=a(f[d],b);h&&h.rank>0&&e.push({str:f[d],match:h})}e.sort(function(a,b){return b.match.rank-a.match.rank});var j=[],k=c>0?Math.min(c,e.length):e.length,l=this.config.start||this.config.end;for(d=0;k>d;d++){var m=e[d].str;l&&(m=i(m,e[d].match,this.config)),j.push(m)}return j},y.prototype.rank=function(b,c){var d=a(b,c);return d?d.rank:0},j(),"object"==typeof module&&module.exports?module.exports=y:"function"==typeof define&&define.amd?define(function(){return y}):"object"==typeof window&&(window.StringCaseMatch=y)}();