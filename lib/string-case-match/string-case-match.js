/*! string-case-match v1.0.0  | (c) 2013 Antelle | https://github.com/antelle/string-case-match/blob/master/MIT-LICENSE.txt */

!function(){"use strict";function a(a,f){if(!f||!a)return 0;var g,h,i,j,r,s,t=a.length,u=a.toLowerCase(),v=[];for(g=0;t>g;g++)v.push(c(a[g]));var w=f.length,x=f.toLowerCase(),y=[];for(g=0;w>g;g++)y.push(c(f[g]));var z=[];for(i=0;t>i;i++)if(u[i]==x[0]){r=v[i];var A;A=0==i?m:r==k||r==l?p:b(v[i],v[i-1])?n:o,s=f[0]==a[i],z.push({pos:i,type:A,strict:s})}if(0==z.length)return 0;for(h=1;w>h;h++){j=y[h];var B=[];a:for(g=0;g<z.length;g++){var C=z[g];for(i=C.pos+1;t>i;i++){r=v[i],s=a[i]==f[h];var D=s||u[i]==x[h];if(i==C.pos+1){if(D){B.push({prev:C,pos:i,type:q,strict:s});continue}if(!C.prev&&C.type==o)continue a}if(r!=k&&r!=l){var E=b(v[i],v[i-1]);D&&E&&B.push({prev:C,pos:i,type:n,strict:s})}else j==k?B.push({prev:C,pos:i,type:p,strict:s}):j==l&&D&&B.push({prev:C,pos:i,type:p,strict:s})}}j==k&&B.push(C),z=B}if(0==z.length)return 0;for(g=0;g<z.length;g++)z[g]=d(z[g]),e(z[g],a,f);return z.sort(function(a,b){return b.rank-a.rank}),z[0]}function b(a,b){return a[0]==g&&(b[0]!=g||a==i&&b==h)||a==j&&b!=j}function c(a){var b=a.toUpperCase();return b!=a.toLowerCase()||"ÃŸ"==a?a==b?i:h:a>="0"&&"9">=a?j:" "==a||"	"==a?k:l}function d(a){for(var b={ch:[]};a;)b.ch.unshift({pos:a.pos,type:a.type,strict:a.strict}),a=a.prev;return b}function e(a,b,c){if(a.rank=0,0!=a.ch.length){for(var d=0,e=0;e<a.ch.length;e++)a.ch[e].strict||d++;if(1!=a.ch.length||a.ch[0].type==m||a.ch[0].type==n){var f=1;f-=.1*(d/a.ch.length),a.ch[0].type==o&&(f-=.5);var g=Math.min(a.ch.length,c.length,b.length);f*=g/b.length,a.rank=f}}}function f(a,b,c){for(var d="",e=0,f=!1,g=0;g<a.length;g++){var h=b.ch[e];h&&h.pos==g?(f||(d+=c.start,f=!0),d+=a[g],e++):(f&&(d+=c.end,f=!1),d+=a[g])}return f&&(d+=c.end),d}var g="l",h="ll",i="lu",j="d",k="s",l="x",m="f",n="w",o="l",p="s",q="q",r=function(a,b){var c=[];if(a)for(var d=0;d<a.length;d++)a[d]&&c.push(a[d]);this.strings=c,b&&(this.config=b)};r.prototype.config={start:"",end:""},r.prototype.matches=function(b,c){if(!b)return[];var d,e=[],g=this.strings,h=g.length;for(d=0;h>d;d++){var i=a(g[d],b);i&&i.rank>0&&e.push({str:g[d],match:i})}e.sort(function(a,b){return b.match.rank-a.match.rank});var j=[],k=c>0?Math.min(c,e.length):e.length,l=this.config.start||this.config.end;for(d=0;k>d;d++){var m=e[d].str;l&&(m=f(m,e[d].match,this.config)),j.push(m)}return j},r.prototype.rank=function(b,c){var d=a(b,c);return d?d.rank:0},"object"==typeof module&&module.exports?module.exports=r:"function"==typeof define&&define.amd?define(function(){return r}):"object"==typeof window&&(window.StringCaseMatch=r)}();